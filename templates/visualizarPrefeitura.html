{%extends "base.html"%}

{% block content %}


{% if page == 'visuPautorizador'%}
<!-- Bootstrap CSS -->
<link rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Custom CSS -->
<link rel="stylesheet" href="/static/css/sidebar.css">
<link rel="stylesheet" href="/static/css/visuA.css">
<link rel="stylesheet" href="/static/css/flashmessage.css">

<script src="/static/js/flashtemporario.js"></script>

{% with messages = get_flashed_messages() %}
{% if messages %}
<div class="flash-message" id="mensagem-flash" style="display: none;">
    <p id="flashzin">{{ messages[0] }}</p>
</div>
{% endif %}
{% endwith %}

<main>
    <div class="content">
        <form method="POST" class="needs-validation">
            <h2><i class="bi bi-person-circle"></i> Informações do
                Autorizador</h2>
            <div class="row">
                <!-- First Form -->
                <div class="form-group col-md-6">
                    <label for="nomeAutorizador"><i class="bi bi-person"></i>
                        Nome</label>
                    <input type="text" class="form-control" id="nomeAutorizador"
                        name="nomeAutorizador"
                        value="{{ autorizador.nomeAutorizador }}" disabled>
                </div>
                <!-- Second Form -->
                <div class="form-group col-md-6">
                    <label for="cpfAutorizador"><i
                            class="bi bi-credit-card"></i> CPF</label>
                    <input type="text" class="form-control" id="cpfAutorizador"
                        name="cpfAutorizador" value="{{ autorizador.cpf }}"
                        disabled>
                </div>
            </div>
            <!-- Second row of forms -->
            <div class="row">
                <!-- Third Form -->
                <div class="form-group col-md-6">
                    <label for="totalCadastros"><i
                            class="bi bi-card-checklist"></i> Total de usuários
                        cadastrados (mensal)</label>
                    <input type="text" class="form-control" id="totalCadastros"
                        name="totalCadastros" value="{{ total_por_mes }}"
                        disabled>
                </div>
                <!-- Fourth Form -->
                <div class="form-group col-md-6">
                    <label for="mediaMensal"><i class="bi bi-person-badge"></i>
                        Média Mensal</label>
                    <input type="text" class="form-control" id="mediaMensal"
                        name="mediaMensal" value="{{ media_mensal|round(2) }}"
                        disabled>
                </div>
            </div>
            <!-- Third row of forms -->
            <div class="row">
                <!-- Fifth Form -->
                <div class="form-group col-md-6">
                    <label for="mediaAnual"><i
                            class="bi bi-credit-card-2-front"></i> Média
                        Anual</label>
                    <input type="text" class="form-control" id="mediaAnual"
                        name="mediaAnual" value="{{ media_anual|round(2) }}"
                        disabled>
                </div>
            </div>
            <!-- Fourth row of forms -->

            <!-- Buttons -->
            <div class="form-row buttonedit">
                <button type="button" class="btn btn-primary"
                    id="openDialogBtn">
                    Editar
                </button>
            </div>
        </form>
        <div class="form-row buttonativar">
            <form action="/desativar" method="POST">
                <button type="submit" class="btn btn-primary" id="desativarBtn">
                    Desativar
                </button>
            </form>

            <form action="/ativar" method="POST">
                <button type="submit" class="btn btn-primary" id="ativarBtn">
                    Ativar
                </button>
            </form>
            <div class="form-group">
                <a class="btn btn-primary" data-bs-toggle="collapse" href="#collapseDocumentos" role="button" aria-expanded="false" aria-controls="collapseDocumentos" onclick="listarArquivos({{ autorizador.id }})">
                    Listar Arquivos
                </a>
            </div>
            <!-- Área para exibir a lista de arquivos -->
            <div class="collapse" id="collapseDocumentos">
                <div class="card card-body">
                    <ul id="document-list" class="list-group"></ul>
                </div>
            </div>
        </div>
    </div>
</main>

<div class="modal fade" id="editModal" tabindex="-1"
    aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Editar
                    Informações</h5>
                <button type="button" class="btn-close" id="closeDialogBtn"
                    aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="POST"
                    action="/atualizarAutorizador/{{ autorizador.cpf }}">
                    <div class="mb-3">
                        <label for="nomeBeneficiado"
                            class="form-label">Nome</label>
                        <input type="text" class="form-control"
                            id="nomeAutorizador" name="nomeAutorizador"
                            value="{{ autorizador.nomeAutorizador }}">
                    </div>
                    <div class="mb-3">
                        <label for="cpfAutorizador"
                            class="form-label">CPF</label>
                        <input type="text" class="form-control"
                            id="cpfAutorizador" name="cpfAutorizador"
                            value="{{ autorizador.cpf }}">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            id="closeDialogBtnFooter">Fechar</button>
                        <button type="submit"
                            class="btn btn-primary btn-text"
                            id="salvarBtn"><span
                                class="spinner-border spinner-border-sm d-none"
                                role="status" aria-hidden="true"></span>
                            Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/static/js/farmacia.js"></script>
<script src="/static/js/prefeitura.js"></script>
<script src="/static/js/flashtemporario.js"></script>
<script src="/static/js/modal.js"> </script>

<script>
    document.getElementById('openDialogButton').addEventListener('click', function () {
        document.getElementById('editFarmaciaDialog').showModal();
    });

    document.getElementById('closeDialogButton').addEventListener('click', function () {
        document.getElementById('editFarmaciaDialog').close();
    });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script
    src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function() {
        $('#openDialogBtn').click(function() {
            $('#editModal').modal('show');
        });

        $('#closeDialogBtn, #closeDialogBtnFooter').click(function() {
            $('#editModal').modal('hide');
        });
    });
</script>

<script>
function listarArquivos(autorizadorId) {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
            var files = JSON.parse(this.responseText);
            var fileList = document.getElementById("document-list");
            fileList.innerHTML = ""; // Limpa a lista antes de adicionar os novos arquivos
            if (files.length > 0) {
                files.forEach(function (file) {
                    var li = document.createElement("li");
                    var a = document.createElement("a");
                    a.textContent = file.filename;
                    a.href = file.url;
                    li.appendChild(a);
                    fileList.appendChild(li);
                });
            } else {
                alert("Nenhum arquivo encontrado.");
            }
        }
    };
    xhttp.open("GET", "/list-files-autorizador/" + autorizadorId, true);
    xhttp.send();
}
</script>


{%elif page == 'visuPfarmacia' %}

<!-- Bootstrap CSS -->
<link rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Custom CSS -->
<link rel="stylesheet" href="/static/css/sidebar.css">
<link rel="stylesheet" href="/static/css/visuA.css">

<main>
    <div class="content">
        <form method="POST" class="needs-validation">
            <h2><i class="bi bi-person-circle"></i> Informações da Farmácia</h2>
            <div class="row">
                <!-- First Form -->
                <div class="form-group col-md-6">
                    <label for="nomeFantasia"><i class="bi bi-person"></i> Nome
                        Fantasia</label>
                    <input type="text" class="form-control" id="nomeFantasia2"
                        name="nome_beneficiado"
                        value="{{farmacia.nomeFantasia}}" disabled>
                </div>
                <!-- Second Form -->
                <div class="form-group col-md-6">
                    <label for="cnpj"><i class="bi bi-credit-card"></i>
                        CNPJ</label>
                    <input type="number" class="form-control" id="CNPJfarmacia"
                        name="cnpj_farmacia" value="{{farmacia.cnpj}}" disabled>
                </div>
            </div>
            <!-- Second row of forms -->
            <div class="row">
                <!-- Third Form -->
                <div class="form-group col-md-6">
                    <label for="QuantidadeEntregue"><i
                            class="bi bi-card-checklist"></i> Quantidade
                        Entregue</label>
                    <input type="text" class="form-control" id="Quant_entregue"
                        name="Quant_entregue"
                        value="{{farmacia.quantidade}}" disabled>
                </div>
                <!-- Fourth Form -->
                <div class="form-group col-md-6">
                    <label for="totalmes"><i
                            class="bi bi-credit-card-2-front"></i> Marca de
                        fralda mais entregue</label>
                    <input type="text" class="form-control" id="totalmes"
                        name="totalmes"
                        value="{{ marca_fralda_entregue if marca_fralda_entregue else 'Nenhuma marca encontrada.'}}"
                        disabled>
                </div>

            </div>

            <!-- Third row of forms -->

            <!-- Buttons -->
            <div class="form-row mb-2">
                <button type="button" class="btn btn-primary mr-2 mb-2"
                    id="openDialogBtn">
                    Editar
                </button>   
            </div>
        </form>
        <div class="form-row buttonativar">

            <form action="/desativar_farmacia" method="POST" class="mr-2 mb-2">
                <button type="submit" class="btn btn-primary" id="desativarBtn">
                    Desativar
                </button>
            </form>

            <form action="/ativar_farmacia" method="POST" class = "mr-2 mb-2">
                <button type="submit" class="btn btn-primary" id="ativarBtn">
                    Ativar
                </button>
            </form>
            <div class="contentDoc"></div>
            <p>

                <a class="btn btn-primary mb-2" data-bs-toggle="collapse"
                    href="#collapseDocumentos" role="button"
                    aria-expanded="false" aria-controls="collapseDocumentos"
                    data-farmacia-id="{{ farmacia.id }}"
                    onclick="listarArquivos(this)">
                    Listar Arquivos
                </a>
            </p>
            <div class="collapse" id="collapseDocumentos">
                <div class="card card-body">
                    <ul id="document-list" class="list-group">

                    </ul>
                </div>
            </div>
            </div>
        </div>
    </div>
</main>

<!-- Modal -->
<div class="modal fade" id="editModal" tabindex="-1"
    aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Editar
                    Informações</h5>

            </div>
            <div class="modal-body">
                <form method="POST"
                    action="/atualizarFarmacia/{{ farmacia.cnpj_farmacia }}">
                    <div class="mb-3">
                        <label for="nomeFantasia" class="form-label">Nome
                            Fantasia</label>
                        <input type="text" class="form-control"
                            id="nomeFantasia" name="nomeFantasia"
                            value="{{farmacia.nomeFantasia}}">
                    </div>
                    <div class="mb-3">
                        <label for="cnpj" class="form-label">CNPJ</label>
                        <input type="cnpj" class="form-control" id="cnpj"
                            name="cnpj" value="{{farmacia.cnpj}} ">
                    </div>
                    <div class="mb-3">
                        <label for="quantidadeTotal"
                            class="form-label">Quantidade Entregue</label>
                        <input type="text" class="form-control"
                            id="quantidadeTotal" name="quantidadeTotal"
                            value="{{farmacia.quantidade}}" disabled>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            id="closeDialogBtnFooter">Fechar</button>
                        <button type="submit"
                            class="btn btn-primary">Salvar</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/static/js/farmacia.js"></script>
<script src="/static/js/prefeitura.js"></script>
<script src="/static/js/flashtemporario.js"></script>
<script src="/static/js/modal.js"> </script>

<script>
    document.getElementById('openDialogButton').addEventListener('click', function () {
        document.getElementById('editFarmaciaDialog').showModal();
    });

    document.getElementById('closeDialogButton').addEventListener('click', function () {
        document.getElementById('editFarmaciaDialog').close();
    });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script
    src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function() {
        $('#openDialogBtn').click(function() {
            $('#editModal').modal('show');
        });

        $('#closeDialogBtn, #closeDialogBtnFooter').click(function() {
            $('#editModal').modal('hide');
        });
    });
</script>
<script>
 function listarArquivos(button) {
    var farmaciaId = button.getAttribute("data-farmacia-id");
    if (!farmaciaId) {
        alert("ID da farmácia não encontrado.");
        return;
    }

    console.log("Listando arquivos para a farmácia com ID:", farmaciaId); // Log de depuração

    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function () {
        if (this.readyState == 4) {
            if (this.status == 200) {
                console.log("Resposta recebida:", this.responseText); // Log de depuração

                var files = JSON.parse(this.responseText);
                var fileList = document.getElementById("document-list");
                fileList.innerHTML = ""; // Limpa a lista antes de adicionar os novos arquivos
                if (files.length > 0) {
                    files.forEach(function (file) {
                        var li = document.createElement("li");
                        var a = document.createElement("a");
                        a.textContent = file.filename;
                        a.href = file.url;
                        li.appendChild(a);
                        fileList.appendChild(li);
                    });
                } else {
                    alert("Nenhum arquivo encontrado.");
                }
            } else {
                console.error("Erro ao listar arquivos:", this.status, this.statusText); // Log de depuração
            }
        }
    };
    xhttp.open("GET", "/list-files-farmacia/" + farmaciaId, true);
    xhttp.send();
}

    </script>
<script src="/static/js/visualizar.js"></script>
<script src="/static/js/modal.js"></script>
<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGLeiJ6AHTLdKw6WwMGvqZW3mVO4hF05q5ZjOU10D7CkHAsG4b0BIp1WxD6"
    crossorigin="anonymous"></script>


{%elif page == 'visuPbeneficiado'%}

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Custom CSS -->
<link rel="stylesheet" href="/static/css/sidebar.css">
<link rel="stylesheet" href="/static/css/visuA.css">

<link rel="stylesheet" href="/static/css/flashmessage.css">
<script src="/static/js/flashtemporario.js"></script>

{% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="flash-message" id="mensagem-flash" style="display: none;" >
                <p id="flashzin">{{ messages[0] }}</p>
            </div>
        {% endif %}
{% endwith %}

<main>
    <div class="content">
        <form method="POST" class="needs-validation">
            <h2><i class="bi bi-person-circle"></i> Informações do Beneficiado</h2>
            <div class="row">
                <!-- First Form -->
                <div class="form-group col-md-6">
                    <label for="nomeBeneficiado"><i class="bi bi-person"></i> Nome</label>
                    <input type="text" class="form-control" id="nomeBeneficiado" name="nome_beneficiado" value="{{ beneficiado.nome_beneficiado }}" disabled>
                </div>
                <!-- Second Form -->
                <div class="form-group col-md-6">
                    <label for="cpfBeneficiado"><i class="bi bi-credit-card"></i> CPF</label>
                    <input type="text" class="form-control" id="cpfBeneficiado" name="cpf_beneficiado" value="{{ beneficiado.cpf_beneficiado }}" disabled>
                </div>
            </div>
            <!-- Second row of forms -->
            <div class="row">
                <!-- Third Form -->
                <div class="form-group col-md-6">
                    <label for="cartaoSUS"><i class="bi bi-card-checklist"></i> Cartão SUS</label>
                    <input type="text" class="form-control" id="cartaoSUS" name="cartao_sus" value="{{ beneficiado.cartao_sus }}" disabled>
                </div>
                <!-- Fourth Form -->
                <div class="form-group col-md-6">
                    <label for="nomeAutorizado"><i class="bi bi-person-badge"></i> Nome Autorizado</label>
                    <input type="text" class="form-control" id="nomeAutorizado" name="nome_autorizado" value="{{ beneficiado.nome_autorizado }}" disabled>
                </div>
            </div>
            <!-- Third row of forms -->
            <div class="row">
                <!-- Fifth Form -->
                <div class="form-group col-md-6">
                    <label for="cpfAutorizado"><i class="bi bi-credit-card-2-front"></i> CPF Autorizado</label>
                    <input type="text" class="form-control" id="cpfAutorizado" name="cpf_autorizado" value="{{ beneficiado.cpf_autorizado }}" disabled>
                </div>
                <!-- Sixth Form -->
                <div class="form-group col-md-6">
                    <label for="quantidadeLiberada"><i class="bi bi-box-seam"></i> Quantidade Liberada</label>
                    <input type="number" class="form-control" id="quantidadeLiberada" name="quantidade_liberada" value="{{ beneficiado.quantidade_liberada }}" disabled>
                </div>
            </div>
            <!-- Fourth row of forms -->
            <div class="row">
                <!-- Seventh Form -->
                <div class="form-group col-md-6">
                    <label for="tamanhoLiberado"><i class="bi bi-rulers"></i> Tamanho Liberado</label>
                    <input type="text" class="form-control" id="tamanhoLiberado" name="tamanho_liberado" value="{{ beneficiado.tamanho_liberado }}" disabled>
                </div>
                <!-- Eighth Form -->
                <div class="form-group col-md-6">
                    <label for="motivoLiberacao"><i class="bi bi-card-text"></i> Motivo Liberação</label>
                    <input type="text" class="form-control" id="motivoLiberacao" name="motivo_liberacao" value="{{ beneficiado.motivo_liberacao }}" disabled>
                </div>
            </div>
            <!-- Fifth row of forms -->
            <div class="row">
                <!-- Ninth Form -->
                <div class="form-group col-md-6">
                    <label for="dataInicio"><i class="bi bi-calendar"></i> Data Início</label>
                    <input type="date" class="form-control" id="dataInicio" name="data_inicio" value="{{ beneficiado.data_inicio }}" disabled>
                </div>
                <!-- Tenth Form -->
                <div class="form-group col-md-6">
                    <label for="validadeMeses"><i class="bi bi-calendar2"></i> Validade em Meses</label>
                    <input type="number" class="form-control" id="validadeMeses" name="validade_meses" value="{{ beneficiado.validade_meses }}" disabled>
                </div>
            </div>
            <!-- Buttons -->
            <div class="form-row">
                <button type="button" class="btn btn-primary" id="openDialogBtn">
                    Editar
                </button>
            </div>
        </form>
        
    </div>
</main>

<!-- Modal -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Editar Informações</h5>
                <button type="button" class="btn-close" id="closeDialogBtn" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="POST" action="/atualizarBeneficiado/{{ beneficiado.cpf_beneficiado }}"    >
                    <div class="mb-3">
                        <label for="nomeBeneficiado" class="form-label">Nome</label>
                        <input type="text" class="form-control" id="nome_beneficiado" name="nome_beneficiado" value="{{ beneficiado.nome_beneficiado }}">
                    </div>
                    <div class="mb-3">
                        <label for="cpfBeneficiado" class="form-label">CPF</label>
                        <input type="text" class="form-control" id="cpf_beneficiado" name="cpf_beneficiado" value="{{ beneficiado.cpf_beneficiado }}">
                    </div>
                    <div class="mb-3">
                        <label for="cartaoSUS" class="form-label">Cartão SUS</label>
                        <input type="text" class="form-control" id="cartao_sus" name="cartao_sus" value="{{ beneficiado.cartao_sus }}">
                    </div>
                    <div class="mb-3">
                        <label for="nomeAutorizado" class="form-label">Nome Autorizado</label>
                        <input type="text" class="form-control" id="nome_autorizado" name="nome_autorizado" value="{{ beneficiado.nome_autorizado }}">
                    </div>
                    <div class="mb-3">
                        <label for="cpfAutorizado" class="form-label">CPF Autorizado</label>
                        <input type="text" class="form-control" id="cpf_autorizado" name="cpf_autorizado" value="{{ beneficiado.cpf_autorizado }}">
                    </div>
                    <div class="mb-3">
                        <label for="quantidadeLiberada" class="form-label">Quantidade Liberada</label>
                        <input type="number" class="form-control" id="quantidade_liberada" name="quantidade_liberada" value="{{ beneficiado.quantidade_liberada }}">
                    </div>
                    <div class="mb-3">
                        <label for="tamanhoLiberado" class="form-label">Tamanho Liberado</label>
                        <input type="text" class="form-control" id="tamanho_liberado" name="tamanho_liberado" value="{{ beneficiado.tamanho_liberado }}">
                    </div>
                    <div class="mb-3">
                        <label for="motivoLiberacao" class="form-label">Motivo Liberação</label>
                        <input type="text" class="form-control" id="motivo_liberacao" name="motivo_liberacao" value="{{ beneficiado.motivo_liberacao }}">
                    </div>
                    <div class="mb-3">
                        <label for="dataInicio" class="form-label">Data Início</label>
                        <input type="date" disabled class="form-control" id="data_inicio" name="data_inicio" value="{{ beneficiado.data_inicio }}">
                    </div>
                    <div class="mb-3">
                        <label for="validadeMeses" class="form-label">Validade em Meses</label>
                        <input type="number" class="form-control" id="validade_meses" name="validade_meses" value="{{ beneficiado.validade_meses }}">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" id="closeDialogBtnFooter">Fechar</button>
                        <button type="submit" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function() {
        $('#openDialogBtn').click(function() {
            $('#editModal').modal('show');
        });

        $('#closeDialogBtn, #closeDialogBtnFooter').click(function() {
            $('#editModal').modal('hide');
        });
    });
</script>

<script src="/static/js/visualizar.js"></script>
<script src="/static/js/modal.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGLeiJ6AHTLdKw6WwMGvqZW3mVO4hF05q5ZjOU10D7CkHAsG4b0BIp1WxD6" crossorigin="anonymous"></script>


{%elif page == 'visuPrefeitura'%}

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<!-- Custom CSS -->
<link rel="stylesheet" href="/static/css/sidebar.css">
<link rel="stylesheet" href="/static/css/visuA.css">

<main>
    <div class="content">
        <form method="POST" class="needs-validation">
            <h2><i class="bi bi-person-circle"></i> Informações da Farmácia</h2>
            <div class="row">
                <!-- First Form -->
                <div class="form-group col-md-6">
                    <label for="nomeFantasia"><i class="bi bi-person"></i> Nome Fantasia</label>
                    <input type="text" class="form-control" id="nomeFantasia" name="nome_beneficiado" value="{{farmacia.nomeFantasia}}" disabled>
                </div>
                <!-- Second Form -->
                <div class="form-group col-md-6">
                    <label for="cnpj"><i class="bi bi-credit-card"></i> CNPJ</label>
                    <input type="number" class="form-control" id="CNPJfarmacia" name="cnpj_farmacia" value="{{farmacia.cnpj}}" disabled>
                </div>
            </div>
            <!-- Second row of forms -->
            <div class="row">
                <!-- Third Form -->
                <div class="form-group col-md-6">
                    <label for="QuantidadeEntregue"><i class="bi bi-card-checklist"></i> Quantidade Entregue</label>
                    <input type="text" class="form-control" id="Quant_entregue" name="Quant_entregue" value="{{farmacia.quantidadeTotal}}" disabled>
                </div>
                <!-- Fourth Form -->
                <div class="form-group col-md-6">
                    <label for="totalmes"><i class="bi bi-credit-card-2-front"></i> Marca de fralda mais entregue</label>
                    <input type="text" class="form-control" id="totalmes" name="totalmes" value="{{ marca_fralda_entregue if marca_fralda_entregue else 'Nenhuma marca encontrada.'}}" disabled>
                </div>
                
            </div>
            
            <!-- Third row of forms -->
            
            <!-- Buttons -->
            <div class="form-row">
                <button type="button" class="btn btn-primary" id="openDialogBtn">
                    Editar
                </button>
            </div>
        </form>
        <div class="form-row buttonativar">
       
            <form action="/desativar_farmacia" method="POST">
                <button type="submit" class="btn btn-primary" id="desativarBtn">
                    Desativar
                </button>
            </form>
            
            <form action="/ativar_farmacia" method="POST">
                <button type="submit" class="btn btn-primary" id="ativarBtn">
                    Ativar
                </button>
            </form>
            
       
        
        </div>
    </div>
</main>

<!-- Modal -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Editar Informações</h5>
                
            </div>
            <div class="modal-body">
                <form method="POST" action="/atualizarPrefeitua/{{ prefeitura.cpf_prefeitura }}"    >
                    <div class="mb-3">
                        <label for="nomeFantasia" class="form-label">Nome Fantasia</label>
                        <input type="text" class="form-control" id="nomeFantasia" name="nomeFantasia" value="{{farmacia.nomeFantasia}}">
                    </div>
                    <div class="mb-3">
                        <label for="cnpj" class="form-label">CNPJ</label>
                        <input type="cnpj" class="form-control" id="cnpj" name="cnpj" value="{{farmacia.cnpj}} ">
                    </div>
                    <div class="mb-3">
                        <label for="quantidadeTotal" class="form-label">Quantidade Entregue</label>
                        <input type="text" class="form-control" id="quantidadeTotal" name="quantidadeTotal" value="{{farmacia.quantidadeTotal}}" disabled>
                    </div>
                   
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" id="closeDialogBtnFooter">Fechar</button>
                        <button type="submit" class="btn btn-primary">Salvar</button>
                    </div>
                </form>
               
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/static/js/farmacia.js"></script>
<script src="/static/js/prefeitura.js"></script>
<script src="/static/js/flashtemporario.js"></script>
<script src ="/static/js/modal.js"> </script>

<script>
    document.getElementById('openDialogButton').addEventListener('click', function () {
        document.getElementById('editFarmaciaDialog').showModal();
    });

    document.getElementById('closeDialogButton').addEventListener('click', function () {
        document.getElementById('editFarmaciaDialog').close();
    });
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function() {
        $('#openDialogBtn').click(function() {
            $('#editModal').modal('show');
        });

        $('#closeDialogBtn, #closeDialogBtnFooter').click(function() {
            $('#editModal').modal('hide');
        });
    });
</script>

<script src="/static/js/visualizar.js"></script>
<script src="/static/js/modal.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGLeiJ6AHTLdKw6WwMGvqZW3mVO4hF05q5ZjOU10D7CkHAsG4b0BIp1WxD6" crossorigin="anonymous"></script>


{%endif%}



{%endblock%}